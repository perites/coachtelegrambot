from database import get_session_of_type_amount
import confg


class SessionType:
    type_name = "name"
    info_text = "info_text"
    _button_text = "button_text"
    ukr_name = "ukr_name"
    no_session_text = "no_session_text"

    def __init__(self, start_date, end_date):
        self.start_date = start_date
        self.end_date = end_date

    def button_text(self):
        free_session_amount, session_of_type_amount = get_session_of_type_amount(self.type_name, self.start_date,
                                                                                 self.end_date)

        available_sessions_of_type_amount = confg.MAX_SESSIONS_OF_ONE_TYPE - session_of_type_amount
        available_sessions_amount = min(free_session_amount, available_sessions_of_type_amount)
        if available_sessions_amount <= 0:
            return f"{self._button_text}", False

        return f"{self._button_text} | Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ {available_sessions_amount} Ð· {confg.MAX_SESSIONS_OF_ONE_TYPE}", True


class Career(SessionType):
    type_name = "Career"
    info_text = """
*ÐšÐ°Ñ€Ê¼Ñ”Ñ€Ð½Ð¸Ð¹ ÐºÐ¾ÑƒÑ‡Ð¸Ð½Ð³.*
Ð¦Ðµ Ñ–Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑ ÑÐ¿Ñ–Ð²Ð¿Ñ€Ð°Ñ†Ñ– ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð° Ñ– ÐºÐ¾ÑƒÑ‡Ð° Ñƒ ÑÑ„ÐµÑ€Ñ– Ð¿Ñ€Ð¾Ñ„ÐµÑÑ–Ð¹Ð½Ð¾Ñ— Ð´Ñ–ÑÐ»ÑŒÐ½Ð¾ÑÑ‚Ñ– ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð° ðŸ’¡

Ð¯ÐºÑ‰Ð¾ Ñ‚Ð¸ Ñ…Ð¾Ñ‡ÐµÑˆ:
âœ…  Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ð¸ Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ - Ð² ÑÐºÐ¾Ð¼Ñƒ Ð½Ð°Ð¿Ñ€ÑÐ¼ÐºÑƒ ÐºÐ°Ñ€'Ñ”Ñ€Ð¸ Ñ€ÑƒÑ…Ð°Ñ‚Ð¸ÑÑŒ

âœ… Ð·Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ð¿Ð¾Ð´Ð°Ð»ÑŒÑˆÐ¸Ñ… Ð´Ñ–Ð¹ Ð¿Ñ€Ð¸ Ð¿Ð¾ÑˆÑƒÐºÑƒ Ð¿ÐµÑ€ÑˆÐ¾Ñ— Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð² Ð†Ð¢

âœ… Ð·Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸, ÑÐº ÐºÑ€Ð°Ñ‰Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ñ‚Ð¸ ÑÐ²Ñ–Ð¹ Ð¿Ð¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ–Ð¹ Ð´Ð¾ÑÐ²Ñ–Ð´,

Ñ‚Ð¾ ÑÐ¿Ñ–Ð²Ð¿Ñ€Ð°Ñ†Ñ Ð· ÐºÐ°Ñ€Ê¼Ñ”Ñ€Ð½Ð¸Ð¼ ÐºÐ¾ÑƒÑ‡ÐµÐ¼ Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð¶Ðµ Ñ‚Ð¾Ð±Ñ– Ð¿Ð¾Ð´Ð¸Ð²Ð¸Ñ‚Ð¸ÑÑ Ð½Ð° ÑÐ²Ð¾ÑŽ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ñ–ÑŽ ÐºÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ð¾, Ð¿Ð¾Ð±ÑƒÐ´ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð»Ð°Ð½ ÐºÐ°Ñ€Ê¼Ñ”Ñ€Ð½Ð¾Ð³Ð¾ Ñ€Ð¾Ð·Ð²Ð¸Ñ‚ÐºÑƒ, Ð½Ð°Ð²Ñ‡Ð¸Ñ‚Ð¸ÑÑ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ñ‚Ð¸ ÑÐµÐ±Ðµ Ð½Ð° ÑˆÐ»ÑÑ…Ñƒ Ð·Ð¼Ñ–Ð½.
"""

    _button_text = "ÐšÐ°Ñ€Ê¼Ñ”Ñ€Ð½Ð¸Ð¹ ÐºÐ¾ÑƒÑ‡Ð¸Ð½Ð³"
    ukr_name = "ÐšÐ°Ñ€'Ñ”Ñ€Ð½Ð¸Ð¹ ÐºÐ¾ÑƒÑ‡Ð¸Ð½Ð³"
    no_session_text = ("ÐÐ°Ð¶Ð°Ð»ÑŒ Ð·Ð°Ñ€Ð°Ð· Ð²ÑÑ– Ð¼Ñ–ÑÑ†Ñ Ð½Ð° ÐºÐ°Ñ€'Ñ”Ñ€Ð½Ð¸Ð¹ ÐºÐ¾ÑƒÑ‡Ð¸Ð½Ð³ Ð·Ð°ÐºÑ–Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ, "
                       "Ð¿ÐµÑ€ÐµÐ¹Ð´Ñ–Ñ‚ÑŒ Ð·Ð° Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½ÑÐ¼ ÑÐºÑ‰Ð¾ Ð²Ð¸ Ñ…Ð¾Ñ‡ÐµÑ‚Ðµ Ð·Ð°Ð±Ñ€Ð¾Ð½ÑŽÐ²Ð°Ñ‚Ð¸ ÑÐµÑÑ–ÑŽ ÑÐ°Ð¼Ðµ Ñ†ÑŒÐ¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ñƒ\n"
                       f"[Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½Ñ]({confg.BOOK_SESSION_LINK})")

    def __init__(self, start_date, end_date):
        super().__init__(start_date, end_date)


class Leadership(SessionType):
    type_name = "Leadership"
    info_text = """
*ÐšÐ¾ÑƒÑ‡Ð¸Ð½Ð³ Ð»Ñ–Ð´ÐµÑ€ÑÑ‚Ð²Ð°.*
Ð’Ñ–Ñ‚Ð°ÑŽ! Ð¯ÐºÑ‰Ð¾ Ð²Ð¸ Ð´Ð¾Ñ”Ð´Ð½Ð°Ð»Ð¸ÑÑ Ð´Ð¾ Ð½Ð°ÑˆÐ¾Ð³Ð¾ Ð¿Ñ€Ð¾Ñ”ÐºÑ‚Ñƒ, Ñ‚Ð¾ Ñƒ Ð²Ð°Ñ Ð²Ð¶Ðµ Ñ” Ð»Ñ–Ð´ÐµÑ€ÑÑŒÐºÐ° Ð¿Ð¾Ð·Ð¸Ñ†Ñ–Ñ ðŸ’ª

Ð¯ÐºÑ‰Ð¾ Ñ‚Ð¸ Ñ…Ð¾Ñ‡ÐµÑˆ:
âœ… Ñ€ÐµÐ°Ð»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸ ÑÐ²Ñ–Ð¹ Ð¿Ð¾Ñ‚ÐµÐ½Ñ†Ñ–Ð°Ð»

âœ… Ð´Ð¾ÑÑÐ³Ð°Ñ‚Ð¸ ÑÐ²Ð¾Ñ—Ñ… Ñ†Ñ–Ð»ÐµÐ¹

âœ… Ð·Ð¼Ñ–Ñ†Ð½Ð¸Ñ‚Ð¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ–ÑÑ‚ÑŒ Ñ– Ð²Ñ–Ñ€Ñƒ Ð² ÑÐµÐ±Ðµ,

Ñ‚Ð¾ ÑÐ¿Ñ–Ð²Ð¿Ñ€Ð°Ñ†Ñ Ð· ÐºÐ¾ÑƒÑ‡ÐµÐ¼ Ð»Ñ–Ð´ÐµÑ€ÑÑ‚Ð²Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð¶Ðµ Ñ‚Ð¾Ð±Ñ– Ð·Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸ ÑÐ²Ð¾Ñ— ÑÐ¸Ð»ÑŒÐ½Ñ– ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð¸, Ð½Ð° ÑÐºÑ– Ñ‚Ð¸ ÑÐ¿Ð¸Ñ€Ð°Ñ”ÑˆÑÑ, Ñ€Ð¾Ð·Ñ–Ð±Ñ€Ð°Ñ‚Ð¸, Ñ‰Ð¾ Ð² Ñ‚Ð¾Ð±Ñ– Ð·Ð°Ð²Ð°Ð¶Ð°Ñ” Ñ‚Ð¾Ð±Ñ– Ð´Ð¾ÑÑÐ³Ð°Ñ‚Ð¸ Ñ†Ñ–Ð»ÐµÐ¹ Ñ– Ð½Ð°Ð²Ñ‡Ð¸Ñ‚Ð¸ÑÑ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ñ‚Ð¸ ÑÐµÐ±Ðµ Ð½Ð° ÑˆÐ»ÑÑ…Ñƒ Ð·Ð¼Ñ–Ð½.
    """
    _button_text = "ÐšÐ¾ÑƒÑ‡Ð¸Ð½Ð³ Ð»Ñ–Ð´ÐµÑ€ÑÑ‚Ð²Ð°"
    ukr_name = "ÐšÐ¾ÑƒÑ‡Ð¸Ð½Ð³ Ð»Ñ–Ð´ÐµÑ€ÑÑ‚Ð²Ð°"
    no_session_text = ("ÐÐ°Ð¶Ð°Ð»ÑŒ Ð·Ð°Ñ€Ð°Ð· Ð²ÑÑ– Ð¼Ñ–ÑÑ†Ñ Ð½Ð° ÐºÐ¾ÑƒÑ‡Ð¸Ð½Ð³ Ð»Ñ–Ð´ÐµÑ€ÑÑ‚Ð²Ð° Ð·Ð°ÐºÑ–Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ, "
                       "Ð¿ÐµÑ€ÐµÐ¹Ð´Ñ–Ñ‚ÑŒ Ð·Ð° Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½ÑÐ¼ ÑÐºÑ‰Ð¾ Ð²Ð¸ Ñ…Ð¾Ñ‡ÐµÑ‚Ðµ Ð·Ð°Ð±Ñ€Ð¾Ð½ÑŽÐ²Ð°Ñ‚Ð¸ ÑÐµÑÑ–ÑŽ ÑÐ°Ð¼Ðµ Ñ†ÑŒÐ¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ñƒ\n"
                       f"[Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½Ñ]({confg.BOOK_SESSION_LINK})")

    def __init__(self, start_date, end_date):
        super().__init__(start_date, end_date)


class Relationship(SessionType):
    type_name = "Relationship"
    info_text = '''
*ÐšÐ¾ÑƒÑ‡Ð¸Ð½Ð³ ÑÑ‚Ð¾ÑÑƒÐ½ÐºÑ–Ð²* â¤ï¸
Ð¡Ð¿Ñ€ÑÐ¼Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð½Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð°Ð¼ Ñƒ Ð¿Ð¾Ð»Ñ–Ð¿ÑˆÐµÐ½Ð½Ñ– ÑÐºÐ¾ÑÑ‚Ñ– Ñ—Ñ…Ð½Ñ–Ñ… Ð²Ð·Ð°Ñ”Ð¼Ð¸Ð½ Ð· Ñ–Ð½ÑˆÐ¸Ð¼Ð¸. Ð¦Ðµ Ð¼Ð¾Ð¶Ðµ Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ‚Ð¸ Ñ€Ð¾Ð·Ð²Ð¸Ñ‚Ð¾Ðº Ð½Ð°Ð²Ð¸Ñ‡Ð¾Ðº ÑÐ¿Ñ–Ð»ÐºÑƒÐ²Ð°Ð½Ð½Ñ, Ð²Ð¸Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ ÐºÐ¾Ð½Ñ„Ð»Ñ–ÐºÑ‚Ñ–Ð², Ð¿Ñ–Ð´Ð²Ð¸Ñ‰ÐµÐ½Ð½Ñ ÐµÐ¼Ð¾Ñ†Ñ–Ð¹Ð½Ð¾Ñ— Ñ–Ð½Ñ‚ÐµÐ»ÐµÐºÑ‚Ñƒ Ñ‚Ð¾Ñ‰Ð¾. 

Ð‘ÑƒÐ´Ðµ ÐºÐ¾Ñ€Ð¸ÑÐ½Ð¸Ð¼, ÑÐºÑ‰Ð¾ Ñ‚Ð¸ Ñ…Ð¾Ñ‡ÐµÑˆ:
âœ… ÐŸÐ¾ÐºÑ€Ð°Ñ‰Ð¸Ñ‚Ð¸ ÑÐ¿Ñ–Ð»ÐºÑƒÐ²Ð°Ð½Ð½Ñ Ñ– Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ð½Ð½Ñ Ð· Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼
âœ… Ð Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸ ÑÐ²Ð¾Ñ— ÐµÐ¼Ð¾Ñ†Ñ–Ñ— Ñ– ÐµÐ¼Ð¾Ñ†Ñ–Ñ— Ð¾Ñ‚Ð¾Ñ‡ÑƒÑŽÑ‡Ð¸Ñ…
âœ… ÐÐ°Ð²Ñ‡Ð¸Ñ‚Ð¸ÑÑ ÐºÐµÑ€ÑƒÐ²Ð°Ñ‚Ð¸ ÐºÐ¾Ð½Ñ„Ð»Ñ–ÐºÑ‚Ð°Ð¼Ð¸
'''
    _button_text = "ÐšÐ¾ÑƒÑ‡Ð¸Ð½Ð³ ÑÑ‚Ð¾ÑÑƒÐ½ÐºÑ–Ð²"
    ukr_name = "ÐšÐ¾ÑƒÑ‡Ð¸Ð½Ð³ ÑÑ‚Ð¾ÑÑƒÐ½ÐºÑ–Ð²"

    no_session_text = ("ÐÐ°Ð¶Ð°Ð»ÑŒ Ð·Ð°Ñ€Ð°Ð· Ð²ÑÑ– Ð¼Ñ–ÑÑ†Ñ Ð½Ð° ÐºÐ¾ÑƒÑ‡Ð¸Ð½Ð³ ÑÑ‚Ð¾ÑÑƒÐ½ÐºÑ–Ð² Ð·Ð°ÐºÑ–Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ, "
                       "Ð¿ÐµÑ€ÐµÐ¹Ð´Ñ–Ñ‚ÑŒ Ð·Ð° Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½ÑÐ¼ ÑÐºÑ‰Ð¾ Ð²Ð¸ Ñ…Ð¾Ñ‡ÐµÑ‚Ðµ Ð·Ð°Ð±Ñ€Ð¾Ð½ÑŽÐ²Ð°Ñ‚Ð¸ ÑÐµÑÑ–ÑŽ ÑÐ°Ð¼Ðµ Ñ†ÑŒÐ¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ñƒ\n"
                       f"[Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½Ñ]({confg.BOOK_SESSION_LINK})")

    def __init__(self, start_date, end_date):
        super().__init__(start_date, end_date)


ALL_SESSIONS_TYPES = {
    Career.type_name: Career,
    Leadership.type_name: Leadership,
    Relationship.type_name: Relationship,
}
